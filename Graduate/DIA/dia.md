<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=0&id=5033464627&auto=1&height=430"></iframe>

## 十.霍夫变换

### 10.0 几何代数

https://wenku.baidu.com/view/27d4926a561252d380eb6e38.html

三元二次方程$Ax^2+By^2+Cz^2+Dxy+Exz+Fyz+Gx+Hy+Iz+J=0$表示二次曲面，包括椭球面，抛物面，双曲面，锥面。

#### 10.0.1 椭球面

$ABC$均正，$J=1$

#### ==10.0.2 抛物面==

$AB$均正，$C=0$，$J=0$为椭圆抛物面

$AB$异号，$C=0$，$J=0$为双曲抛物面

#### ==10.0.3 双曲面==

$AB>0,C<0,J=+1$   单叶双曲面

$AB>0,C<0,J=-1$   双叶双曲面

#### 10.0.4 锥面

$AB>0,C<0,J=0$

### 10.1 直线（斜率截距）

一条确定直线$y=p_0x+q_0$对应$(p,q)$坐标系上一个点$(p_0,q_0)$

过点$(x_0,y_0)$的一簇直线对应坐标系上一簇点，即$q=-x_0p+y_0$这条直线

在直线$y=p_0x+q_0$上共线的一簇点对应$(p,q)$坐标系上共点$(p_0,q_0)$的一簇直线。

### 10.2 直线（倾斜角）

确定直线$\lambda=xcos\theta+ysin\theta$对应$(\lambda,\theta)$坐标系上一个点

点$(x_0,y_0)$对应$\lambda=Asin(\theta+\alpha)$，$A=\sqrt{x_0^2+y_0^2},\alpha=tan^{-1}(x_0/y_0)$的一条正弦曲线

直线上一簇点对应共点$(\lambda,\theta)$的一簇正弦曲线

### 10.3 圆

$$
(x-a)^2+(y-b)^2=R^2
$$



一个固定的圆对应$(a,b,R)$坐标系上一个固定点

圆上一个点$(x_0,y_0)$对应曲线$(x_0-a)^2+(y_0-b)^2-R^2=0$，即顶点在$(x_0,y_0,0)$处的圆锥曲面

### 10.4 椭圆

$$
\frac{(x-p)^2}{a^2}+\frac{(y-q)^2}{b^2}=1
$$



一个固定椭圆对应$(p,q,a,b)$坐标系上一个固定点或$(x_1,y_1,x_2,y_2,a)$坐标系上一个点。

椭圆上一个点$(x_0,y_0)$对应曲线$b^2(x_0-p)^2+a^2(y_0-q)^2-a^2b^2=0$

这是一个四维坐标系，难以建模，我们可以拆分成两个三维坐标系$(a,b,p)$和$(a,b,q)$

然后对椭圆曲线对x求导：
$$
\begin{align}
y=x&tan\theta\\
\frac{\partial y}{\partial x}=tan\theta&=\frac{y}{x}\\
\frac{(x-p)^2}{a^2}+\frac{(y-q)^2}{b^2}&=1\\
\frac{(x-p)}{a^2}+\frac{(y-q)}{b^2}\tan\theta&=0\\
p=x\pm\frac{a^2tan\theta}{\sqrt{a^2tan^2\theta+b^2}}\\
q=y\pm\frac{b^2}{\sqrt{a^2tan^2\theta+b^2}}
\end{align}
$$

以$(x_1,y_1)$为一个焦点的所有椭圆，假设其另一焦点$(x_2,y_2)$，焦距$c$，则有$(x_2-x_1)^2+(y_2-y_1)^2=(2c)^2$，是$(x_2,y_2,c)$坐标系上顶点在$(x_1,y_1,0)$处的圆锥曲面

以$(x_1,y_1)$为一个焦点的所有椭圆，假设其另一焦点$(x_2,y_2)$，焦距$c$，此时无法确定一个椭圆，但是$(x_1,y_1)$和$(x_2,y_2)$能确定$c$.还需要一个参数$a$即长轴才能确定一个椭圆。

$(x_2,y_2,a)$坐标系上满足不等式
$$
a>\frac{1}{2}\sqrt{(x_2-x_1)^2+(y_2-y_1)^2}
$$
的点都表示以$(x_1,y_1)$为焦点的椭圆，这还是一个圆锥。

$(x_2,y_2,b)$坐标系上$b>0$的所有点都表示以$(x_1,y_1)$为焦点的椭圆。

### 10.5 检测圆环

- 平滑低通滤波器
- 初始化两个累加数组$A_1(a,b,r_1),A_2(a,b,r_2)$
- 对每个点，计算$f_1(a,b,r_1)=0$或者$f_2(a,b,r_2)=0$
- 若满足，则累加数组加一，否则继续检测
- 通过$A_1,A_2$两个数组检测2个圆得到圆盘

### 10.6 检测圆盘

- 平滑低通滤波器
- Sobel算子求梯度取阈值，进行边缘检测
- 霍夫变换累加器，得到累加器图
- 沿梯度方向投票，投票最大值即为圆心，半径可由原图测得

## 二. 数字化

### 2.1 距离

#### 2.1.1 欧式距离

- L2范数

#### 2.1.2 城区距离

- L1范数

#### 2.1.3 棋盘距离：

- $L-\infty$范数

### 2.2 弦与连通悖论

- 正方形L8是数字弦，菱形L4是紧致弦
- 

## 四. 形态学

==P33开始的各种实用算法==

### 4.1 去噪

先腐蚀再膨胀，再膨胀再腐蚀。

腐蚀相减取边界。
$$
\{[(𝐴 ⊖ 𝐵) ⨁𝐵] ⨁𝐵\} ⊖ 𝐵 = (𝐴 ∘ 𝐵) ∙ B\\
A-(A㊀B)
$$

### 4.2 区域填充

先求补集。

膨胀取交，反复迭代，得到区域填充，仅仅是边界内的区域填充，不包括边界。==八连通区域用3x3四连通模板==

后面可以腐蚀取补或膨胀取补。

### 4.3 连通组元提取

## 五. 图像增强

Sobel算子和prewitt算子都是先低通滤波再中心差分。

因为Sobel算子对于像素的位置的影响做了加权，与Prewitt算子、Roberts算子相比因此效果更好。

## 六. 图像恢复

### 6.1 与图像增强的异同

- 同：改善输入图像的视觉质量
- 异：增强一般仅借助人类视觉系统的特性以取得看起来较好的视觉结果；恢复则要根据相应退化模型和知识重建或恢复原始的图像。

## 七.边缘检测

### 7.1 拉普拉斯算子

双像素宽的边缘

### 7.2 马尔算子

高斯平滑+拉普拉斯+过零点作为边缘

### 7.3 Canny算子

沿着梯度方向，梯度最大的点是边缘点。

- 高斯滤波平滑
- 计算梯度大小和方向
- 非极大值抑制，实现单像素宽的边缘
- 双阈值检测和连接

### 7.4 SUSAN算子

计算模板的游程和，边缘点的游程和为模板面积的一半，角点的游程和为模板面积四分之三

- 对模板中每个像素进行检测
- 计算游程和

$$
S(x_0,y_0)=\Sigma C(x_0,y_0;x,y)
$$

- 边缘响应

$$
R(x_0,y_0)=\left \{
\begin{align}
&G-S(x_0,y_0)\quad if\quad S(x_0,y_0)<G\\
&0
\end{align}
\right.
$$

几何阈值$G=3S_{max}/4$，$S_{max}$是模板面积。（角点的几何阈值是$S_{max}/2$）

## 九. 图像表达

直角坐标空间划分：SIFT，HOG

极坐标空间划分：Shape Context

LBP/HOG提取过程，不变性：

- 光照不变性。相对大小关系不变，LBP结果不变

SIFT如何实现不变性

反色后SIFT主方向、尺度因子和128-D描述子的变化：

## 十二. 光流方程

## 12.1 缺点

- 只能估计梯度方向（法向）光流
- 切向光流大小未定义
- 恒定光流时$\nabla\Phi=0$，估计不可靠
- 平坦区域不如边缘区域可靠

### 12.2 平滑区域

感知二维运动依赖光照和目标表面纹理。平滑图像区域，图像没有变化，感知二维运动效果不好，所以光流方程不好。